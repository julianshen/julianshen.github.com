<!doctype html><!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=en><![endif]--><!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang=en><![endif]--><!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang=en><![endif]--><!--[if gt IE 8]><!--><html class=no-js lang=en><!--<![endif]--><head><meta charset=utf-8><title>Posts &#8211; Le murmure de Julian</title><meta name=description content><meta property="og:title" content="Posts"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://blog.jln.co/post/"><meta property="og:image" content="https://blog.jln.co/images/avatar.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.jln.co/images/avatar.png"><meta name=twitter:title content="Posts"><meta name=twitter:description content><link rel=canonical href=https://blog.jln.co/post/><link rel=alternate type=application/rss+xml href=https://blog.jln.co/post/feed.xml title="Le murmure de Julian"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/main.css><link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel=stylesheet type=text/css><meta http-equiv=cleartype content="on"><meta name=generator content="Hugo 0.105.0"><script src=/js/vendor/modernizr-2.6.2.custom.min.js></script>
<script async src=https://unpkg.com/mermaid@8.2.3/dist/mermaid.min.js></script>
<link rel="shortcut icon" href=/favicon.png></head><body id=post-index class=feature><nav id=dl-menu class=dl-menuwrapper role=navigation style=display:inline-block><button class=dl-trigger>Open Menu</button><ul class=dl-menu><li><a href=/>Home</a></li><li><a href=#>About</a><ul class=dl-submenu><li><img src=/images/avatar.png alt="Julian Shen's photo" class=author-photo><h4>Julian Shen</h4><p>Softward developer</p></li><li><a href=mailto:julianshen22@gmail.com><i class="fa fa-fw fa-envelope"></i> Email</a></li><li><a href=https://linkedin.com/in/julianshen><i class="fa fa-fw fa-linkedin"></i> LinkedIn</a></li><li><a href=https://github.com/julianshen><i class="fa fa-fw fa-github"></i> GitHub</a></li><li><a href=https://instagram.com/julianshen><i class="fa fa-fw fa-instagram"></i> Instagram</a></li></ul></li><li><a href=#>Posts</a><ul class=dl-submenu><li><a href=/post/>All Posts</a></li><li><a href=/tags/>All Tags</a></li></ul></li><li><a href=/></a></li></ul></nav><div class=entry-header><div class=image-credit>Image credit: <a href=http://www.dargadgetz.com/ios-7-abstract-wallpaper-pack-for-iphone-5-and-ipod-touch-retina/>dargadgetz</a></div><div class=entry-image><img src=/abstract-2.jpg alt=Posts></div><div class=header-title><div class=header-title-wrap><h1><a href=/ title="Go to the homepage">Le murmure de Julian</a></h1><h2>All posts</h2></div></div></div><div id=main role=main><article class=hentry><header><div class=entry-meta><span class="entry-date date published updated"><time datetime="2016-07-05 22:10:51 +0000 UTC"><a href=/iOS%E9%96%8B%E7%99%BC%E7%AD%86%E8%A8%98-%E6%A8%A1%E7%B3%8A%E8%83%8C%E6%99%AF/>Jul 5, 2016</a></time></span>
<span class=entry-reading-time><i class="fa fa-clock-o"></i>
Reading time ~1 minute</span></div><h1 class=entry-title><a href=/iOS%E9%96%8B%E7%99%BC%E7%AD%86%E8%A8%98-%E6%A8%A1%E7%B3%8A%E8%83%8C%E6%99%AF/ rel=bookmark title="[iOS開發筆記] 模糊背景" itemprop=url>[iOS開發筆記] 模糊背景</a></h1></header><div class=entry-content><p>去年為了參加WWDC, 開始練了Swift, 寫了兩個library, 不過好像一直都沒寫過完整的App, 連UI好像都沒真的去刻過(去年寫的東西跟UI比較無關), 因此最近利用了一些時間開始了個side project, 做side project就常常會把時間花在一些枝微末節的地方, 比如說, 為了做一個像Android那樣的Floating action button, 去找來一個現成的3rd party lib - <a href=https://github.com/yoavlt/LiquidFloatingActionButton>yoavlt/LiquidFloatingActionButton</a> , 那個像水珠一樣突出去的效果, 我還蠻愛的:</p><p><img src=/images/posts/gt1.gif alt></p><p>但缺點是, 後面缺一個擋住背景元件的, 以致於要去點伸上來的小按鈕容易誤按後面的元件, 因此就想自己改一個後面多一個overlay的版本, 當然也不想隨便貼一張白白的就交差, 起碼要像這樣:</p><p><img src=/images/posts/fg2.gif alt></p><p>這邊不是單純蓋一個深色半透明的背景而已, 還需要作一點模糊的部分</p><p>在iOS上(iOS8 之後), 作這樣的東西很簡單, 只要利用<a href=https://developer.apple.com/reference/uikit/uivisualeffectview>UIVisualEffectView</a>和<a href=https://developer.apple.com/reference/uikit/uiblureffect>UIBlurEffect</a>這兩個東西, 寫法很簡單:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span>    <span style=color:#66d9ef>let</span> blurEffect = UIBlurEffect(style: .Dark)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> uiEffectView = UIVisualEffectView(effect: blurEffect)
</span></span><span style=display:flex><span>    uiEffectView.frame = overlayView.bounds
</span></span><span style=display:flex><span>    overlayView.addSubview(uiEffectView)
</span></span></code></pre></div><p><a href=https://developer.apple.com/reference/uikit/uiblureffect>UIBlurEffect</a>有三種樣式, Dark, Light, 和ExtraLight, 上面的範例是Dark, 蠻適合用在這地方的, 利用這個方法就可以不用自己擷取screenshot再算模糊化了</p></div></article><article class=hentry><header><div class=entry-meta><span class="entry-date date published updated"><time datetime="2016-06-19 13:17:04 +0000 UTC"><a href=/Golang-%E4%B8%80%E5%80%8B%E7%B0%A1%E5%96%AE%E7%9A%84Mongo-db-proxy/>Jun 19, 2016</a></time></span>
<span class=entry-reading-time><i class="fa fa-clock-o"></i>
Reading time ~4 minutes</span></div><h1 class=entry-title><a href=/Golang-%E4%B8%80%E5%80%8B%E7%B0%A1%E5%96%AE%E7%9A%84Mongo-db-proxy/ rel=bookmark title="[Golang] 一個簡單的Mongo db proxy" itemprop=url>[Golang] 一個簡單的Mongo db proxy</a></h1></header><div class=entry-content><p>之前被Parse搞的半死, 一直很好奇它的API到Mongodb的request之間到底是怎樣的對應</p><p>要弄清楚這個其實也不難, 把Mongodb的profiler全打開去看log就好了(<code>db.setProfilingLevel(2)</code>), 但這也是有缺點, profiler會寫到<code>system.profile</code>這個collection去, 而它是固定大小, 不能無限制的放, 再加上它還要多寫入這段, 多多少少影響效能</p><p>我需要的是一個從外部來觀察的工具, 不會影響到DB本身, 並且也可以將網路本身所花費的時間也包含進去, 所以想到的是在中間插一個proxy server</p><p>在現成的工具找到一個叫<a href=https://github.com/christkv/mongodb-proxy>MonoDB Proxy</a>的工具, 這是用nodejs寫的, 勉強可以, 也證明了這個方法是可行的, 但這工具雖然有做到代理這部份, 但在log部分, 由於它並未解析bson, 所以詳細的內容並不好看, 所以就自己來寫一個</p><h4 id=功能需求>功能需求</h4><ol><li>支援<a href=https://docs.mongodb.com/manual/reference/mongodb-wire-protocol/>mongodb wire protocol</a>, 而不是只是單純的轉送資料</li><li>印出request跟response內JSON的內容</li><li>要能夠知道每個request所需要的時間(含網路)</li></ol><h4 id=成品>成品</h4><p>最後寫出的的成品在這: <a href=https://github.com/julianshen/mongoproxy>https://github.com/julianshen/mongoproxy</a></p><p>整個還蠻簡單的:</p><ol><li>wire.go 實作wire protocol</li><li>proxy.go 實作從client收資料並轉寫到server端</li><li>cmd/mp/main.go command line主程式的部分</li></ol><h4 id=使用方法>使用方法</h4><p>這個工具是用Go寫的, 所以使用之前需要先安裝go</p><h5 id=安裝>安裝</h5><p><code>go get julianshen/mongoproxy/mp</code></p><p>這個步驟做完後, 就可以把mp這個指令裝好了, 確定 $GOPATH/bin是在你路徑內, mp這個檔也是在那邊</p><h5 id=使用>使用</h5><p><code>mp --port=6001 --remote=mydb:27017 --response</code></p><p>其中:</p><ol><li>port是你這個proxy server的服務點</li><li>remote是遠端的mongodb (host:port)</li><li>Reponse是需不需要log回傳的部分</li></ol><h4 id=實作wire-protocol>實作Wire protocol</h4><p>本來覺得Wire protocol會蠻複雜的, 結果, 其實是蠻簡單的</p><p>所有的wire protocol request都會有一個標準的表頭:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>struct</span> MsgHeader {
</span></span><span style=display:flex><span>    int32   messageLength; <span style=color:#75715e>// total message size, including this
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    int32   requestID;     <span style=color:#75715e>// identifier for this message
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    int32   responseTo;    <span style=color:#75715e>// requestID from the original request
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                           <span style=color:#75715e>//   (used in responses from db)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    int32   opCode;        <span style=color:#75715e>// request type - see table below
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>對應golang, 我定義成這樣:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>MsgHeader</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>MessageLength</span> <span style=color:#66d9ef>int32</span> <span style=color:#75715e>// total message size, including this
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>RequestID</span>     <span style=color:#66d9ef>int32</span> <span style=color:#75715e>// identifier for this message
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>ResponseTo</span>    <span style=color:#66d9ef>int32</span> <span style=color:#75715e>// requestID from the original request
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>//   (used in responses from db)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>Opcode</span> <span style=color:#75715e>// request type - see table below
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>因為一開始就可以讀到整個訊息長度的, 所以就蠻好解析的, wire protocol的實作我是有參考了<a href=https://github.com/facebookgo/dvara>dvara</a>, 本來是有想拿它的code來改, 但看了一下發現它也沒完整實作wire protocol, 秉著自己也來了解一下這部份的想法, 就重頭自己刻了</p><p>跟<a href=https://github.com/facebookgo/dvara>dvara</a>不同的地方是, 我用go的binary package來讀header而非自己刻一個, binary.Read的確是一個蠻好用的工具, 用底下的code就可以讀出header這個資料結構:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>h</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>MsgHeader</span>{}
</span></span><span style=display:flex><span><span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>binary</span>.<span style=color:#a6e22e>Read</span>(<span style=color:#a6e22e>r</span>, <span style=color:#a6e22e>binary</span>.<span style=color:#a6e22e>LittleEndian</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>h</span>)
</span></span></code></pre></div><p>另外, 除header外, 各request的所帶的欄位各自不同, 這部份的作法就是定好各個所需的資料結構, 用reflection的方式來讀取各相關資料:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>v</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>reflect</span>.<span style=color:#a6e22e>ValueOf</span>(<span style=color:#a6e22e>req</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>v</span> = <span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>Elem</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 根據資料結構內定義的每個欄位用相關的方法讀取
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> &lt; <span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>NumField</span>(); <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>f</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>Field</span>(<span style=color:#a6e22e>i</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>t</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>f</span>.<span style=color:#a6e22e>Type</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>bytesRead</span> <span style=color:#f92672>==</span> int(<span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>MessageLength</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>bytesRead</span> &gt; int(<span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>MessageLength</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>, <span style=color:#a6e22e>ErrorWrongLen</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>switch</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#a6e22e>t</span> <span style=color:#f92672>==</span> <span style=color:#a6e22e>reflect</span>.<span style=color:#a6e22e>TypeOf</span>((<span style=color:#a6e22e>bson</span>.<span style=color:#a6e22e>D</span>)(<span style=color:#66d9ef>nil</span>)):
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>d</span>, <span style=color:#a6e22e>n</span>, <span style=color:#a6e22e>e</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>readDoc</span>(<span style=color:#a6e22e>bufferReader</span>)
</span></span></code></pre></div><h4 id=解析bson>解析bson</h4><p>這部份就沒再重新造輪子了, 直接用golang著名的mongodb driver mgo裡的bson lib: <a href=https://godoc.org/gopkg.in/mgo.v2/bson>https://godoc.org/gopkg.in/mgo.v2/bson</a> , 這個bson lib已經寫的很不錯了, 直接拿來用即可</p><p>在這個package內, 泛用的bson資料結構有兩種: <a href=https://godoc.org/gopkg.in/mgo.v2/bson#M><code>bson.M</code></a> 和 <a href=https://godoc.org/gopkg.in/mgo.v2/bson#D><code>bson.D</code></a></p><p>這兩個是不同用途的,仔細看一下M跟D的定義:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>M</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>interface</span>{}
</span></span></code></pre></div><p>和</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>D</span> []<span style=color:#a6e22e>DocElem</span>
</span></span></code></pre></div><p>如果你是要把解析出的資料用map來操作, M是蠻方便的, 一開始我也是依著之前我寫相關的東西的習慣用M, 不過這邊卻是不可以用M的, 這也是我碰到bug的地方</p><p>由於M解析出的是Map, 所以每個field的順序它並沒記住, 但偏偏在wire protocol裡, 尤其是 $cmd, 順序是重要的, 所以Unmarshal出的M再Marshal回去, 順序可能不是原本的順序了, 而這在這個proxy應用上, client寫什麼東西過來就要寫什麼到server才不至於出錯</p><h4 id=測試和debug>測試和Debug</h4><p>我是用<a href=https://www.wireshark.org>Wireshark</a>來驗證我的實作有沒問題, Wireshark預設會把到27017 port的資料解析成wire protocol的內容供閱讀, 當然也可以自己手動請它解析</p><h4 id=其他應用>其他應用</h4><p>這樣的proxy應該可以不只應用在debug, 像是Parse open source的<a href=https://github.com/facebookgo/dvara>dvara</a>, 它也是利用了proxy來做connection pooling, 應該也可以用在request routing和caching的應用上</p></div></article><article class=hentry><header><div class=entry-meta><span class="entry-date date published updated"><time datetime="2016-06-16 20:37:58 +0000 UTC"><a href=/%E5%8F%88%E5%86%8D%E6%8A%8ABlog%E6%90%AC%E5%AE%B6%E4%BA%86/>Jun 16, 2016</a></time></span>
<span class=entry-reading-time><i class="fa fa-clock-o"></i>
Reading time ~7 minutes</span></div><h1 class=entry-title><a href=/%E5%8F%88%E5%86%8D%E6%8A%8ABlog%E6%90%AC%E5%AE%B6%E4%BA%86/ rel=bookmark title=又再把Blog搬家了 itemprop=url>又再把Blog搬家了</a></h1></header><div class=entry-content><p>一直把Blog當作紀錄一些事情用的地方, 想法, 或是學習過的一些東西, 雖然不是很頻繁的在寫, 不過也寫了好幾年了, 從以前到現在, 換過好幾次平台, 從自己架的wordpress, 到posterous, blogger, 一直到現在用的Tumblr, 這中間最喜歡的還是posterous, 不過它已經不存在了, 而Tumblr也用了好一陣子了, 雖然加減湊合著用好像還OK, 不過編輯上也一直不是那麼順手, 尤其是貼source code, 因此也一直想把它換掉</p><p>那 <strong>medium</strong> 呢? medium我還沒很有動力去搞懂它, 會在上面看一些文章沒錯, 但把Blog移到上面去, 好像也沒啥動力</p><p>考慮了好一陣子, 不過最後還是把整個Blog遷移了, 反正現在有一個自己的domain (<em>blog.jln.co</em>), 搬家不用改地址!</p><p>遷移之前, 想了幾個我的需求:</p><h4 id=需求>需求</h4><ol><li>有方便的編輯器可以用, 最好可以支援mark down, 打html有點麻煩, WYSIWYG編輯器通常效率也不高</li><li>貼code好貼, 也方便閱讀</li><li>模版好編輯, 至少我要能知道怎麼改模版</li><li>好預覽</li><li>能同步到各個social network, 至少Facebook, Twitter, 也能同步到我原本的Tumblr和blogger</li><li>要能夠友善支援Open graph和Twitter card, 對每次share的FB的醜醜文字版型實在不喜歡</li><li>好轉移, 好備份, 有版本控制更好!</li></ol><h4 id=解決方案>解決方案</h4><p>現成的blog service, 好的什麼都要錢(ghost, wordpress), 免費的大概也都被我用過了, 自己架, 又得管server, 後來想想, blog都是靜態的網頁, 也真的不需要一個很複雜的系統, 這時候就想到一個解決方案, 那就是Github</p><p>Github有一個<a href=https://pages.github.com>Github pages</a>的服務, 可以讓你host你的靜態網頁, 所以只要有一個方法可以把Blog轉成靜態網頁就可以了, 這個還蠻Geek的方式感覺就蠻適合我的</p><p>找到了幾個方法轉blog:</p><ol><li><a href=https://jekyllrb.com>Jekyll</a></li><li><a href=http://octopress.org>Octopress</a></li><li><a href=https://hexo.io/zh-tw/>Hexo</a></li></ol><p>Octopress是已經完結不再維護了, 所以就Jekyll和Hexo兩個在抉擇, 兩者都有蠻多的主題跟模版功能, 也有不少plugins</p><p>Hexo是台灣精品, 而且是nodekjs寫的, 語言上我比較熟, 要改比較好改,而Jekyll是Ruby寫的, 我跟Ruby很不熟, 但它跟Github pages結合緊密, 而且已經有tool可以從Tumblr移轉內容過來了, 最後我選擇了Jekyll, 選擇Jekyll的原因是</p><ol><li>Github page直接原生支援, 只要把md檔push上去後, 就會自動產生網頁(不過後來我還是先在自己電腦產生完再push, 後面再說原因)</li><li>找到一個適合的也不太難改的theme, 就懶得去翻Hexo的了, 而且找到的那個對Open graph和Twitter card的支援也不錯, 不用改太多</li><li>原生的Tumblr import tool</li></ol><p>不過整個也花了不少個晚上修改, 又花了一個晚上才能寫完這篇紀錄 @@</p><h4 id=安裝jekyll>安裝Jekyll</h4><p>網路上可以找到很多安裝Jekyll的文章, 這邊就不說太多, 我試了兩個不同的作法:</p><h5 id=作法-1>作法 1</h5><p>這是最基本的作法</p><ol><li>先用 <code>gem install jekyll</code> 安裝jekyll</li><li>用 <code>jekyll new myblog</code> 在myblog目錄產生一個基本的網站</li><li>用 <code>jekyll s</code> 會在 localhost:4000 開啟一個服務, 這時就透過browser可以看看你的blog長怎樣了</li></ol><p>這方法的缺點是, 套用主題時, 還得改一堆東西, 有點麻煩</p><h5 id=作法-2>作法 2</h5><ol><li>一樣先裝jekyll</li><li>找到一個人家做好的theme (我是用<a href=https://github.com/mmistakes/hpstr-jekyll-theme>hpstr</a>這個), clone下來改, 因為大部分的都已經把他用的plugin之類的都先寫好在config了, 就省不少事, 建議找theme要注意其對應的Jekyll版本, 像我裝的Jekyll是3, 所以找的是適合3的</li><li>用 <code>gem install bundler</code> 安裝bundler</li><li>用 <code>bundle install</code> 來安裝相關的plugins</li><li>用 <code>jekyll s</code> 看結果</li></ol><p>我後來採用的是作法2, 踩在人家的肩膀上比較快 :P</p><h4 id=設定github-pages>設定github pages</h4><p>這部份沒什麼難度, 創建一個專案名稱叫做 <em>你的名字.github.com</em> , 把相關檔案放到這邊去就行了</p><p>Github pages支援兩種方式, 一種是純粹的靜態網頁, 就是把html跟其他相關檔案丟到這邊就好(master branch), 另一種方式就是Jekyll, Jekyll的部分只要把前一個動作的檔案放進來就好, 它會自己幫你產生對應的靜態網頁</p><p>不過第二種方法的缺點是因為Github pages只支援幾種Jekyll plugins, 而且不支援自訂的plugins(放在 <em>_plugins</em> 目錄下的), 就算你在你自己電腦裡面跑完把產生後的 <strong>_site</strong> 目錄一起放上去也是沒用的</p><h4 id=從tumblr匯入之前文章>從Tumblr匯入之前文章</h4><p>這部份沒太複雜, 是透過<a href=https://github.com/jekyll/jekyll-import>jekyll-import</a></p><p>安裝jekyll-import一樣可以透過<code>gem install</code>來安裝, 但建議不要這樣做, 是因為他用的Tumblr API是JSONP但程式卻將它當一般JSON在解碼, 會出錯, 這部份在最新版的code有解決(害我還去追了source code), 所以抓source回來自己build比較安全</p><p>裝好之後執行:</p><pre tabindex=0><code>#!/bin/sh
ruby -rubygems -e &#39;require &#34;jekyll-import&#34;;
    JekyllImport::Importers::Tumblr.run({
      &#34;url&#34;            =&gt; &#34;http://blog.jln.co&#34;,
      &#34;format&#34;         =&gt; &#34;html&#34;, # or &#34;md&#34;
      &#34;grab_images&#34;    =&gt; true,  # whether to download images as well.
      &#34;add_highlights&#34; =&gt; false,  # whether to wrap code blocks (indented 4 spaces) in a Liquid &#34;highlight&#34; tag
      &#34;rewrite_urls&#34;   =&gt; false   # whether to write pages that redirect from the old Tumblr paths to the new Jekyll paths
    })&#39;
</code></pre><p>它就會把文章抓回到 <em>_post</em>的目錄下</p><h4 id=open-graph--twitter-card>Open graph & Twitter card</h4><p>如果把內容分享到Facebook或是Twitter上只有短短的文字, 不是很好看, 所以希望在這部份能夠至少加上一張圖</p><p><a href=https://github.com/mmistakes/hpstr-jekyll-theme>hpstr</a>這個theme已經有在 ** _includes/head.html ** 寫好OG跟Twitter card相關的tag了, 圖片(og:image)的部分, 他的規則/順序是:</p><ol><li>Front matter 裡面設定的</li><li>_config.xml 裡的logo設定</li></ol><p>我希望是更自動一點, 而不是自己去設定, 所以找到一個plugin : <a href=https://github.com/merlos/jekyll-auto-image>jekyll-auto-image</a>, 這個plugin聰明一點, 他的順序是:</p><ol><li>內文內出現的第一張圖</li><li>_config.xml 裡面設定的圖</li></ol><p>但這樣還稍嫌單調一些, 我想要達成的是:</p><ol><li>內文內出現的第一張圖</li><li>根據標籤選的對應的圖(比如說把我go語言相關的設成Gopher的圖片), 這樣不會每個都一樣, 比較有變化一點</li><li>預設的圖</li></ol><p>再加上auto image裡面關於image的設定跟我用的theme有所衝突, 這就需要把原本的auto image改一下了</p><p>我新增一個rb檔, 放在 ** _plugins **目錄下, 內容如下:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>require <span style=color:#e6db74>&#34;jekyll&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>module</span> Jekyll
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AutoImageGenerator</span> <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>Generator</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>generate</span>(site)
</span></span><span style=display:flex><span>      @site <span style=color:#f92672>=</span> site
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      site<span style=color:#f92672>.</span>pages<span style=color:#f92672>.</span>each <span style=color:#66d9ef>do</span> <span style=color:#f92672>|</span>page<span style=color:#f92672>|</span>
</span></span><span style=display:flex><span>        img <span style=color:#f92672>=</span> get_image(page)
</span></span><span style=display:flex><span>        page<span style=color:#f92672>.</span>data<span style=color:#f92672>[</span><span style=color:#e6db74>&#39;image1&#39;</span><span style=color:#f92672>]</span> <span style=color:#f92672>=</span> img <span style=color:#66d9ef>if</span> img
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Now do the same with posts</span>
</span></span><span style=display:flex><span>      site<span style=color:#f92672>.</span>posts<span style=color:#f92672>.</span>docs<span style=color:#f92672>.</span>each <span style=color:#66d9ef>do</span> <span style=color:#f92672>|</span>post<span style=color:#f92672>|</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>#puts &#34;hola&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>#puts Jekyll::VERSION</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>#puts post.class</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>#puts post.inspect</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>#puts post.data.inspect</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>#puts &#34;-----&#34;      </span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>#puts post.output</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>#puts &#34;----&#34;</span>
</span></span><span style=display:flex><span>        img <span style=color:#f92672>=</span> get_image(post)
</span></span><span style=display:flex><span>        post<span style=color:#f92672>.</span>data<span style=color:#f92672>[</span><span style=color:#e6db74>&#39;thumb&#39;</span><span style=color:#f92672>]</span> <span style=color:#f92672>=</span> img <span style=color:#66d9ef>if</span> img
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span> <span style=color:#75715e># generate</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get_image</span>(page)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> page<span style=color:#f92672>.</span>data<span style=color:#f92672>[</span><span style=color:#e6db74>&#39;thumb&#39;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> page<span style=color:#f92672>.</span>data<span style=color:#f92672>[</span><span style=color:#e6db74>&#39;thumb&#39;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># convert the contents to html, and extract the first &lt;img src=&#34;&#34; apearance</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># I know, it&#39;s not efficient, but rather easy to implement :)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> page<span style=color:#f92672>.</span>class <span style=color:#f92672>==</span> <span style=color:#66d9ef>Jekyll</span><span style=color:#f92672>::</span><span style=color:#66d9ef>Document</span> <span style=color:#75715e># for jekyll 3.0 posts &amp; collections</span>
</span></span><span style=display:flex><span>        htmled <span style=color:#f92672>=</span> <span style=color:#66d9ef>Jekyll</span><span style=color:#f92672>::</span><span style=color:#66d9ef>Renderer</span><span style=color:#f92672>.</span>new(@site, page, @site<span style=color:#f92672>.</span>site_payload)<span style=color:#f92672>.</span>convert(page<span style=color:#f92672>.</span>content)
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>        htmled <span style=color:#f92672>=</span> page<span style=color:#f92672>.</span>transform <span style=color:#75715e># for jekyll 2.x pages</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      img_url <span style=color:#f92672>=</span> htmled<span style=color:#f92672>.</span>match(<span style=color:#e6db74>/&lt;img.*\ssrc=[\&#34;\&#39;]([\S.]+)[\&#34;\&#39;]/i</span>)
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> img_url<span style=color:#f92672>[</span><span style=color:#ae81ff>1</span><span style=color:#f92672>]</span> <span style=color:#66d9ef>if</span> img_url <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      tags <span style=color:#f92672>=</span> page<span style=color:#f92672>.</span>data<span style=color:#f92672>[</span><span style=color:#e6db74>&#39;tags&#39;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>      imagemap <span style=color:#f92672>=</span> @site<span style=color:#f92672>.</span>config<span style=color:#f92672>[</span><span style=color:#e6db74>&#39;imagemap&#39;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> tags <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> <span style=color:#f92672>&amp;&amp;</span> imagemap <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>        tags<span style=color:#f92672>.</span>each <span style=color:#66d9ef>do</span> <span style=color:#f92672>|</span>t<span style=color:#f92672>|</span>
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>if</span> imagemap<span style=color:#f92672>[</span>t<span style=color:#f92672>.</span>downcase<span style=color:#f92672>]</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>            url <span style=color:#f92672>=</span> imagemap<span style=color:#f92672>[</span>t<span style=color:#f92672>.</span>downcase<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>!</span>url<span style=color:#f92672>.</span>match(<span style=color:#e6db74>/^http/</span>)
</span></span><span style=display:flex><span>              url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;/images/&#39;</span> <span style=color:#f92672>+</span> url
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> url
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> @site<span style=color:#f92672>.</span>config<span style=color:#f92672>[</span><span style=color:#e6db74>&#39;logo&#39;</span><span style=color:#f92672>]</span> <span style=color:#66d9ef>if</span> @site<span style=color:#f92672>.</span>config<span style=color:#f92672>[</span><span style=color:#e6db74>&#39;logo&#39;</span><span style=color:#f92672>]</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span> <span style=color:#75715e># class</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span> <span style=color:#75715e># module</span>
</span></span></code></pre></div><p>這版就有達到我想要的目的, 但這不代表問題解了, 反而是問題的開始, 前面有說過github只支援特定的plugins, 所以怎樣這段改過的plugin都不會被它執行到, 唯一能做的解法就是改用靜態網頁的方式</p><p>jekyll產生的靜態網頁都放在 _site 目錄下, 所以真的要進master branch只有這裡面的, 其他都不用, 所以要先在本地端用 <code>jekyll b</code>去產生相關的靜態網頁到 _site裡再上傳</p><p>那怎測試呢? 一開始為了測試方便我都以本地端的server做測試, 但如果要測試Facebook share的話則需要能夠讓Facebook 連過來抓取網頁來分析, 但這點在區網不是很方便, 所以就帶入了 <a href=https://ngrok.com>ngrok</a> 這個工具, 這工具就是提供給你一個外部的網址, 你在本地端跑了ngrok這程式後, 就有一個可以對應你本地端的server, 還蠻好用的</p><h4 id=自動發布到社群網站>自動發布到社群網站</h4><p>這當然是用<a href=http://ifttt.com>ifttt</a>囉, 因為有用到jekyll-feed這個plugin, 所以會產生一個feed.xml的檔案, 所以就利用ifttt的feed channel來設定觸發</p><h4 id=結語>結語</h4><p>本來明明不想花太多功夫的, 結果不但花了很多功夫, 還花了一頁來紀錄這篇 orz</p></div></article><article class=hentry><header><div class=entry-meta><span class="entry-date date published updated"><time datetime="2016-02-25 01:13:36 +0000 UTC"><a href=/%E7%AD%86%E8%A8%98-%E7%A7%BB%E6%A4%8DParse-Push/>Feb 25, 2016</a></time></span>
<span class=entry-reading-time><i class="fa fa-clock-o"></i>
Reading time ~3 minutes</span></div><h1 class=entry-title><a href=/%E7%AD%86%E8%A8%98-%E7%A7%BB%E6%A4%8DParse-Push/ rel=bookmark title="[筆記] 移植Parse Push" itemprop=url>[筆記] 移植Parse Push</a></h1></header><div class=entry-content><p>今天追完了綠箭, 該來點功課, 不過今天忘了買啤酒了:(</p><p>Parse Push, 這功能無疑應該是Parse本身比較受歡迎的部分, 既然Parse明年要關門大吉了,這部份也是必須要搬家的, 但搬家比較麻煩的不是要搬到哪去, 而是之前累積的使用者, 總不希望一搬了就找不到他們了, Parse Push支援了包含了Google的GCM和Apple的APNS,以及他們自己的PPNS,以GCM來說, 在_Installation裡面, Parse是有儲存了GCM的deviceToken, 如果你之前用的是自己的GCM Sender ID, 那這部份直接搬了就可以用了, 但如果不是, 那預設用的是Parse自己的, 這樣這些deviceToken就不能夠使用自己的Sender ID來送, 必須要用用下面的方法來補救:</p><ul><li>從Google的<a href=https://console.developers.google.com/>Developer console</a>取的Sender ID跟API Key</li><li>在AndroidManifest.xml加入 <code>&lt;meta-data android:name="com.parse.push.gcm_sender_id" android:value="id:12345678"></code> (必須要以"id:&ldquo;加上你的sender id)</li><li>發布新的升級到Play store</li><li>使用者更新後至少發送一次Push (如果你在Application中有去儲存Installation, 這時候因為有了新的sender, 所以deviceToken會被更新)</li><li>可以用你自己的API key送給新的device token了(可以不用透過Parse console去送, 也可以用其他程式)</li></ul><p>這個Go的範例可以用來試驗送PUSH到你的手機上:</p><script src=https://gist.github.com/julianshen/90a7b5c4a24eb13f41fa.js></script><p>找出你手機的deviceToken後即可用這個來驗證是否能夠成功送出push</p><p>但這樣還不夠, 我們還需要一個負責幫我們送push的server, 在之前那篇<a href=http://blog.jln.co/post/139174339467/%E7%AD%86%E8%A8%98-parse-%E8%87%AA%E6%95%91%E6%96%B9%E6%A1%88%E4%B9%8B%E4%B8%80-pushd>Parse自救方案</a>裡有提到一個Pushd, 這是其中一個作法, 不過需要改一些東西才可以符合Parse Android SDK接收的格式, 另一個作法是透過open source的<a href=https://github.com/ParsePlatform/parse-server/>Parse Server</a>, 原本它剛一出來時, 並沒支援Push, 但後來有其他人幫它加了上去了, 但它的方式是提供了API給你送PUSH, 但一來把API server跟PUSH server放一起並不是件好事, 二來當送大量的PUSH這樣的設計並不保險(並沒有queue, 送到一半server死了就麻煩了)</p><p>不過要以Parse server的為基礎拆出push的部分也不是很難, 做了一個簡單的範例: <a href=https://github.com/julianshen/parse_push_js>github.com/julianshen/parse_push_js</a></p><p>在這範例裡, 使用了Parse Server的ParsePushAdapter, 並且利用了Redis當作queue來做成的簡單的push server, 這樣應該就加減堪用了, 不過這邊有一個還需要再改的是, ParsePushAdapter 並不會把產生的push id回傳到上一層, 這樣要做追蹤紀錄其實有點比較不方便, 這邊還需要再加強一下</p></div></article><article class=hentry><header><div class=entry-meta><span class="entry-date date published updated"><time datetime="2016-02-18 09:23:42 +0000 UTC"><a href=/%E7%AD%86%E8%A8%98-%E8%A2%AB%E5%86%A4%E6%9E%89%E7%9A%84MongoDB/>Feb 18, 2016</a></time></span>
<span class=entry-reading-time><i class="fa fa-clock-o"></i>
Reading time ~2 minutes</span></div><h1 class=entry-title><a href=/%E7%AD%86%E8%A8%98-%E8%A2%AB%E5%86%A4%E6%9E%89%E7%9A%84MongoDB/ rel=bookmark title="[筆記] 被冤枉的MongoDB" itemprop=url>[筆記] 被冤枉的MongoDB</a></h1></header><div class=entry-content><p>續<a href=http://blog.jln.co/post/139117302737/%E7%AD%86%E8%A8%98-deploy-mongodb-replica-set-to-coreosfleet>前篇</a> 裝好了MongoDB的Cluster後(1 Primary, 2 Secondaries)就開始進行大量的資料移轉</p><p>結果資料寫到一半, 突然發現Primary換人了, 雖然因為有Secondaries, 會有人上來替代, 因為Mongo只有Primary才可以被寫入, 這使得client必須重新建立對新的primary的connection, 一度以為機器被reboot了, 但查logs並沒這現象, 後來又以為, MongoDB也太不濟了吧, 這種量級的寫入居然可以擊倒它, 結果後來查了log發現, 他的確被restart了, 只是兇手不是他, 是別人叫他去死的</p><p>一切是Fleet惹的禍, 根據這篇<a href=https://github.com/coreos/fleet/issues/1289>Fleet engine stops units when etcd leadership change or has connectivity issues #1289</a>, Fleet只要聯絡不到etcd, 就會認為不能獨活了, 就會把其他人也給殺了(可惡的殺人兇手),追根據底就是timeout設的太短了, 以至於當系統稍微(只是稍微而已)一忙, 就很容易超過timeout, 然後他就認為, 他的情人死了!(也太玻璃心了)</p><p>解決方案就是延長timeout, 修改cloud-config加上如下的東西(把etcd的heartbeat跟election timeout延長, 把fleet相關的也給延長):</p><pre>

#cloud-config

coreos:
  etcd2:
    heartbeat-interval: 600
    election-timeout: 6000
  fleet:
    engine-reconcile-interval: 10
    etcd-request-timeout: 5
    agent-ttl: 120s

</pre><p>至於Azure上裝的coreos, cloud-config位置是在: <code>/var/lib/waagent/CustomData</code>, 改完restart機器就好</p></div></article><div class=pagination><ul class=inline-list><li><a href=/post/page/12/ class=btn>Previous</a></li><li><a href=/post/>1</a></li><li><a href=/post/page/2/>2</a></li><li><a href=/post/page/3/>3</a></li><li><a href=/post/page/4/>4</a></li><li><a href=/post/page/5/>5</a></li><li><a href=/post/page/6/>6</a></li><li><a href=/post/page/7/>7</a></li><li><a href=/post/page/8/>8</a></li><li><a href=/post/page/9/>9</a></li><li><a href=/post/page/10/>10</a></li><li><a href=/post/page/11/>11</a></li><li><a href=/post/page/12/>12</a></li><li><strong class=current-page>13</strong></li><li><a href=/post/page/14/>14</a></li><li><a href=/post/page/15/>15</a></li><li><a href=/post/page/16/>16</a></li><li><a href=/post/page/17/>17</a></li><li><a href=/post/page/18/>18</a></li><li><a href=/post/page/19/>19</a></li><li><a href=/post/page/20/>20</a></li><li><a href=/post/page/21/>21</a></li><li><a href=/post/page/22/>22</a></li><li><a href=/post/page/23/>23</a></li><li><a href=/post/page/24/>24</a></li><li><a href=/post/page/25/>25</a></li><li><a href=/post/page/26/>26</a></li><li><a href=/post/page/27/>27</a></li><li><a href=/post/page/28/>28</a></li><li><a href=/post/page/29/>29</a></li><li><a href=/post/page/30/>30</a></li><li><a href=/post/page/31/>31</a></li><li><a href=/post/page/32/>32</a></li><li><a href=/post/page/33/>33</a></li><li><a href=/post/page/34/>34</a></li><li><a href=/post/page/35/>35</a></li><li><a href=/post/page/36/>36</a></li><li><a href=/post/page/37/>37</a></li><li><a href=/post/page/38/>38</a></li><li><a href=/post/page/39/>39</a></li><li><a href=/post/page/40/>40</a></li><li><a href=/post/page/41/>41</a></li><li><a href=/post/page/42/>42</a></li><li><a href=/post/page/43/>43</a></li><li><a href=/post/page/44/>44</a></li><li><a href=/post/page/45/>45</a></li><li><a href=/post/page/46/>46</a></li><li><a href=/post/page/47/>47</a></li><li><a href=/post/page/48/>48</a></li><li><a href=/post/page/49/>49</a></li><li><a href=/post/page/50/>50</a></li><li><a href=/post/page/51/>51</a></li><li><a href=/post/page/52/>52</a></li><li><a href=/post/page/53/>53</a></li><li><a href=/post/page/54/>54</a></li><li><a href=/post/page/55/>55</a></li><li><a href=/post/page/56/>56</a></li><li><a href=/post/page/57/>57</a></li><li><a href=/post/page/58/>58</a></li><li><a href=/post/page/59/>59</a></li><li><a href=/post/page/60/>60</a></li><li><a href=/post/page/61/>61</a></li><li><a href=/post/page/62/>62</a></li><li><a href=/post/page/63/>63</a></li><li><a href=/post/page/64/>64</a></li><li><a href=/post/page/65/>65</a></li><li><a href=/post/page/66/>66</a></li><li><a href=/post/page/67/>67</a></li><li><a href=/post/page/68/>68</a></li><li><a href=/post/page/69/>69</a></li><li><a href=/post/page/70/>70</a></li><li><a href=/post/page/71/>71</a></li><li><a href=/post/page/72/>72</a></li><li><a href=/post/page/73/>73</a></li><li><a href=/post/page/74/>74</a></li><li><a href=/post/page/75/>75</a></li><li><a href=/post/page/76/>76</a></li><li><a href=/post/page/14/ class=btn>Next</a></li></ul></div></div><div class=footer-wrapper><footer role=contentinfo><span>Powered by <a href=https://gohugo.io/ rel=nofollow>Hugo</a> using the <a href=https://github.com/dldx/hpstr-hugo-theme rel=nofollow>HPSTR theme</a>.</span></footer></div><script src=//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js></script>
<script src=https://kit.fontawesome.com/872a53b461.js crossorigin=anonymous></script>
<script>window.jQuery||document.write('<script src="/js/vendor/jquery-1.9.1.min.js"><\/script>')</script><script src=/js/scripts.min.js></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-79243751-1","auto"),ga("send","pageview"))</script><div id=fb-root></div><script async defer crossorigin=anonymous src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v7.0&appId=293999444006555&autoLogAppEvents=1" nonce=geZSUIUh></script></body></html>