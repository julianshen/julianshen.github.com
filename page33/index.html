<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>朱隸安貓囈語錄 &#8211; Le murmure de Julian</title>
<meta name="description" content="朱隸安貓囈語錄">
<meta name="keywords" content="java, android, julianshen, backend, blog, golang, swift">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://blog.jln.co/images/bkg2.jpg">

<meta name="twitter:title" content="朱隸安貓囈語錄">
<meta name="twitter:description" content="朱隸安貓囈語錄">
<meta name="twitter:creator" content="@jlnshen">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="朱隸安貓囈語錄">
<meta property="og:description" content="朱隸安貓囈語錄">
<meta property="og:url" content="http://blog.jln.co/page33/">
<meta property="og:site_name" content="Le murmure de Julian">
<meta name="og:image" content="http://blog.jln.co/images/avatar.png">
<meta name="google-site-verification" content="Fwa4TQMXvroZpNT7rrwHzdf-rWBe1RDuTu75Enx_DWA">



<link rel="canonical" href="http://blog.jln.co/page33/">
<link href="http://blog.jln.co/feed.xml" type="application/atom+xml" rel="alternate" title="Le murmure de Julian Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://blog.jln.co/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://blog.jln.co/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://blog.jln.co/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://blog.jln.co/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://blog.jln.co/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://blog.jln.co/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://blog.jln.co/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://blog.jln.co/images/apple-touch-icon-144x144-precomposed.png">



  
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-1789797875470932",
        enable_page_level_ads: true
    });
    </script>
  

</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://blog.jln.co/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://blog.jln.co/images/avatar.png" alt="Julian Shen photo" class="author-photo">
					<h4>Julian Shen</h4>
					<p>software deverloper</p>
				</li>
				<li>
					<a href="mailto:julianshen22@gmail.com"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://twitter.com/jlnshen"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				<li>
					<a href="https://facebook.com/julianshen"><i class="fa fa-fw fa-facebook"></i> Facebook</a>
				</li>
				
				<li>
					<a href="https://linkedin.com/in/julianshen"><i class="fa fa-fw fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="https://github.com/julianshen"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				<li>
					<a href="https://instagram.com/julianshen"><i class="fa fa-fw fa-instagram"></i> Instagram</a>
				</li>
				<li>
					<a href="https://www.flickr.com/photos/julianshen"><i class="fa fa-fw fa-flickr"></i> Flickr</a>
				</li>
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://blog.jln.co/posts/">All Posts</a></li>
				<li><a href="http://blog.jln.co/tags/">All Tags</a></li>
			</ul>
		</li>
		
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  
  
    <div class="entry-image">
      <img src="http://blog.jln.co/images/bkg2.jpg" alt="朱隸安貓囈語錄">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Le murmure de Julian</h1>
      <h2>朱隸安貓囈語錄</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2011-05-10T14:19:21+08:00"><a href="http://blog.jln.co/generating-facebook-key-hash-for-android/">May 10, 2011</a></time></span><span class="author vcard"><span class="fn"><a href="http://blog.jln.co/about/" title="About Julian Shen">Julian Shen</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://blog.jln.co/generating-facebook-key-hash-for-android/" rel="bookmark" title="Generating Facebook key hash for Android" itemprop="url">Generating Facebook key hash for Android</a></h1>
    
  </header>
  <div class="entry-content">
    <div class="posterous_autopost"><p>According to<a href="http://developers.facebook.com/docs/guides/mobile/#android"> Facebook mobile development document</a> (Android), you need to generate a key hash for your application in order to apply Facebook SSO(Single Sign on).</p>  <p>Here is the formal way to do this:</p>  <blockquote>  <p><span style="color: #99cc00;">keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore  | openssl sha1 -binary | openssl base64</span></p>  </blockquote>  <p>But sometimes you won&rsquo;t have a tradtional key store especially when building with Android open sources. Keys in Android open sources are in pk8 format. In order to generate key hashes with these keys, you need to tranfer them into a pk12 key store.</p>  <p>I created another way to generate keyhash without <em><strong>keytool</strong></em> and <em><strong>openssl</strong></em>. Here is the source codes: <a href="https://github.com/julianshen/FacebookKeyHashGen">FacebookKeyHashGen</a></p>  <p>This program get package sigature directly from package itself. </p></div>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2011-05-09T10:09:58+08:00"><a href="http://blog.jln.co/mos-%E6%98%A5%E8%8F%87%E8%B1%86%E8%85%90%E9%9B%9E%E8%82%89%E5%A0%A1/">May 09, 2011</a></time></span><span class="author vcard"><span class="fn"><a href="http://blog.jln.co/about/" title="About Julian Shen">Julian Shen</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://blog.jln.co/mos-%E6%98%A5%E8%8F%87%E8%B1%86%E8%85%90%E9%9B%9E%E8%82%89%E5%A0%A1/" rel="bookmark" title="Mos 春菇豆腐雞肉堡" itemprop="url">Mos 春菇豆腐雞肉堡</a></h1>
    
  </header>
  <div class="entry-content">
    <div class="posterous_autopost"><a href="http://instagr.am/p/ECW-w/"><div class="p_embed p_image_embed"> <a href="http://posterous.com/getfile/files.posterous.com/julianshen/kcHzGJkkhmIJEsyakIbFsElouDFlIpmfubundgwcDJdeFxofJqsuxcovfvyr/media_httpimagesinsta_jqwvp.jpg.scaled1000.jpg"><img alt="Media_httpimagesinsta_jqwvp" height="500" src="http://posterous.com/getfile/files.posterous.com/julianshen/kcHzGJkkhmIJEsyakIbFsElouDFlIpmfubundgwcDJdeFxofJqsuxcovfvyr/media_httpimagesinsta_jqwvp.jpg.scaled500.jpg" width="500"/></a> </div> </a><br/>Taken at 新竹高鐵摩斯漢堡</div>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2011-05-09T00:34:09+08:00"><a href="http://blog.jln.co/poc%E7%AD%86%E8%A8%98rhino-on-android-%E6%96%B0%E7%9A%84onclicklistener/">May 09, 2011</a></time></span><span class="author vcard"><span class="fn"><a href="http://blog.jln.co/about/" title="About Julian Shen">Julian Shen</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://blog.jln.co/poc%E7%AD%86%E8%A8%98rhino-on-android-%E6%96%B0%E7%9A%84onclicklistener/" rel="bookmark" title="[POC][筆記][Rhino on Android] - 新的onClickListener" itemprop="url">[POC][筆記][Rhino on Android] - 新的onClickListener</a></h1>
    
  </header>
  <div class="entry-content">
    <div class="posterous_autopost"><p><a href="http://julianshen.posterous.com/pocrhino-developing-android-with-js-onclickli">上次的作法</a>:</p>  <blockquote>  <p><span style="color: #800000;">var</span> button1 = findview(R.id(<span style="color: #3366ff;">&lsquo;button1&rsquo;</span>));</p>  <p>button1.setOnClickListener(<span style="color: #800000;">function</span>(view, methodName)<br/>{<br/>     if (methodName == <span style="color: #3366ff;">&ldquo;onClick&rdquo;</span>) { <br/>         log(&ldquo;MyScript&rdquo;, &ldquo;clicked&rdquo;); <br/> } });</p>    </blockquote>  <p>當然不是很滿意, &ldquo;if(methodName == &quot;onClick&rdquo;)&ldquo;這樣的寫法太醜了啦!</p>  <p>所以這次的目標是:</p>  <blockquote class="posterous_short_quote">  <p>button1.onclick = function(view) {</p>  <p>     log(&quot;MyScript&rdquo;, &ldquo;clicked&rdquo;);</p>  <p>     alert('Hi there!&rsquo;);</p>  <p>};</p>  </blockquote>  <p>這樣比較像印象中javascript的寫法</p>  <p>為了達到這目的, 必須在View中加入onclick這個property, 但原本View class(Java)並沒這東西, 如何將它包裝出來?</p>  <p>Rhino對於Javascript使用原生的java objects並不是直接使用, 還是有透過一層包裝, 因此這就是要做出這個property的路了, 包裝的點在於<a href="http://www.mozilla.org/rhino/apidocs/org/mozilla/javascript/WrapFactory.html">WrapFactory</a>, 而原生的Java object會被包裝長NativeJavaObject </p>  <p>而Rhino允許我們用自己的WrapFactory取代原本的, 像是這樣:</p>  <blockquote>  <p>jsContext.setWrapFactory(new <strong><span style="color: #ff6600;">AndroidWrapFactory()</span></strong>);</p>  </blockquote>  <p>因此我們會需要自己實作這一個AndroidWrapFactory, 把原本的View改用不同的包裝, 而非原本的NativeJavaObject, 基本上只需要實作wrapAsJavaObject即可:</p>  <p>  <script src="https://gist.github.com/961470.js?file=AndroidWrapFactory.java"></script></p>    <p>這邊用了一個新實作的ViewWrapper來取代NativeJavaObject</p>  <p>  <script src="https://gist.github.com/961471.js?file=ViewWrapper.java"></script></p>  <p>本來我的打算是繼承自NativeJavaObject, 然後再加入自己的東西, 不過後來發現這樣的作法總會在&quot;put&quot;時出差錯, 原因是NativeJavaObject是沒辦法加入新的member了(其實這說法有點問題, 應該是只要設prototype給它的話還是可以), 加上一些比較實用的function是定義在ScriptableObject的裡面, 因此, 我最後採用ScriptableObject來包裝</p>  <p>但要如何在ScriptableObject裡面實現像NativeJavaObject那樣可以直接叫用原本的Java class裡面的member呢?這部份不用自己實作, 只要把原本的NativeJavaObject當做這新的ViewWrapper的prototype就好了, 所以這邊constructor呼叫的super contructor是:</p>  <blockquote class="posterous_short_quote">  <p>public ScriptableObject(Scriptable scope, Scriptable prototype)</p>  <p>===&gt; super(scope, new NativeJavaObject(scope, javaObject, staticType));</p>  </blockquote>  <p>defineProperty這包裝是從ScritableObject那邊改寫其中一個過來的, 主要是用來讓我們可以把這些&quot;onlick&quot;,&ldquo;onlongclick&quot;包裝成property, 在ViewWrapper可以實作getter和setter, 為了避免名稱上的混淆, 所以把getter的prefix定義成&quot;jsget&quot;而setter是&quot;jsset&rdquo;</p>  <p>在onlick的setter中, 除了將function object存起來外, 還直接對原本包裝的View設一個OnClickListener, 動作則是執行這個Function object</p>  <p>最後, 前面的範例裡面有一個&quot;alert('Hi! there&rsquo;)&ldquo;, 因此為了&quot;alert()&quot;多實作一個Alert.java出來(跟上面的無關啦), 這是source:</p>  <p>  <script src="https://gist.github.com/961481.js?file=Alert.java"></script></p>    <p>接下來的目標, </p>  <ul><li>包裝一個實際真的可以拿來開發的package, release 0.1 alpha</li>  <li>實作XmlHttpRequest</li>  <li>Adapter &amp; AdapterView, Service &amp; Provider</li>  </ul></div>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2011-05-08T14:54:14+08:00"><a href="http://blog.jln.co/google-code-jam-problem-b-magicka/">May 08, 2011</a></time></span><span class="author vcard"><span class="fn"><a href="http://blog.jln.co/about/" title="About Julian Shen">Julian Shen</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://blog.jln.co/google-code-jam-problem-b-magicka/" rel="bookmark" title="Google code jam: Problem B. Magicka " itemprop="url">Google code jam: Problem B. Magicka </a></h1>
    
  </header>
  <div class="entry-content">
    <div class="posterous_autopost"><p><a href="http://code.google.com/codejam/contest/dashboard?c=975485#s=p1">題目</a></p>  <p>一直在想說為啥我submit的答案有問題想到沒睡好, 剛剛才發現, 我誤會了一個關鍵句:</p>  <blockquote>  <p>it is opposed to something in your element list, then your <span style="font-size: medium;"><strong>whole element list</strong></span> will be cleared.</p>  </blockquote>  <p>結果我誤解成只有被兩個字元夾住的區域才會clear, test set也沒驗出我的問題&hellip;. = =&ldquo;</p>  <p>這題關鍵除了這個外, 還有</p>  <blockquote class="posterous_medium_quote">  <p>If the two elements from a pair appear at <strong>the end of the element list</strong>, then both elements of the pair will be immediately removed, and they will be replaced by the element they form.</p>  </blockquote>  <p>所以, &rdquo;<span style="border-collapse: collapse; font-family: bogus font here, monospace;">1 QFT 1 QF 7 FAQFDFQ&quot;的答案會是&quot;[F, D, T]&ldquo;而不是&rdquo;[]&ldquo;</span></p>  <p><span style="font-family: bogus font here, monospace;"><span style="border-collapse: collapse;">浪費了一題&hellip; :(</span></span></p>  </div>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2011-05-08T11:58:56+08:00"><a href="http://blog.jln.co/%E8%8D%89%E8%8E%93%E7%89%9B%E5%A5%B6/">May 08, 2011</a></time></span><span class="author vcard"><span class="fn"><a href="http://blog.jln.co/about/" title="About Julian Shen">Julian Shen</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://blog.jln.co/%E8%8D%89%E8%8E%93%E7%89%9B%E5%A5%B6/" rel="bookmark" title="草莓牛奶" itemprop="url">草莓牛奶</a></h1>
    
  </header>
  <div class="entry-content">
    <div class="posterous_autopost"><a href="http://instagr.am/p/D_gb2/"><div class="p_embed p_image_embed"> <a href="http://posterous.com/getfile/files.posterous.com/julianshen/cAhixDsJwiaekqgapIlonmwpujEzyvJDArcbzjkoelemwmofbsEAjtjxAceB/media_httpimagesinsta_wgAgz.jpg.scaled1000.jpg"><img alt="Media_httpimagesinsta_wgagz" height="500" src="http://posterous.com/getfile/files.posterous.com/julianshen/cAhixDsJwiaekqgapIlonmwpujEzyvJDArcbzjkoelemwmofbsEAjtjxAceB/media_httpimagesinsta_wgAgz.jpg.scaled500.jpg" width="500"/></a> </div> </a></div>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    
      
        <li><a href="http://blog.jln.co/page32/" class="btn">Previous</a></li>
      
    

    
    
      <li><a href="http://blog.jln.co">1</a></li>
    

    
    
      
      
      <li>…</li>
    

    
    
    

    
      
        
        
        
        <li><a href="http://blog.jln.co/page31/">31</a></li>
      
    
      
        
        
        
        <li><a href="http://blog.jln.co/page32/">32</a></li>
      
    
      
        <li><strong class="current-page">33</strong></li>
      
    
      
        
        
        
        <li><a href="http://blog.jln.co/page34/">34</a></li>
      
    
      
        
        
        
        <li><a href="http://blog.jln.co/page35/">35</a></li>
      
    

    
    
      <li>…</li>
    

    
      <li><a href="http://blog.jln.co/page63/">63</a></li>
    

    
    
      <li><a href="http://blog.jln.co/page34/" class="btn">Next</a></li>
    
  </ul>
</div>


</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2016 Julian Shen. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://blog.jln.co/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://blog.jln.co/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-79243751-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>


          

</body>
</html>